<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë§ˆì´í˜ì´ì§€ - ê¹€í•™ìƒ</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        /* ì™€ì´ì–´í”„ë ˆì„ íŠ¹ìœ ì˜ ë ˆì´ì•„ì›ƒì„ ìœ„í•œ ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        .content-wrapper {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        /* ì™¼ìª½ í”„ë¡œí•„ ì¹´ë“œ */
        .profile-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 30px 20px;
            text-align: center;
            height: fit-content;
            border: 1px solid var(--divider);
        }
        .profile-img-circle {
            width: 100px; height: 100px;
            background: #e0e0e0; border-radius: 50%;
            margin: 0 auto 15px;
        }
        .profile-info h2 { margin-bottom: 5px; }
        .profile-info p { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 5px; }
        .side-btns { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }
        .btn-side {
            padding: 10px; border-radius: 20px; border: 1px solid var(--text-primary);
            background: var(--white); cursor: pointer; font-size: 0.85rem;
        }

        /* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */
        .section-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--divider);
        }
        .tab-menu {
            display: flex; gap: 15px; margin-bottom: 15px;
            font-weight: bold; cursor: pointer;
        }
        .tab-menu span.active { color: var(--primary); text-decoration: underline; }

        /* ìˆ˜ê°• ë‚´ì—­ ë¦¬ìŠ¤íŠ¸ */
        .list-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 0; border-bottom: 1px dashed var(--divider);
        }
        .status-badge { font-weight: bold; margin-left: auto; margin-right: 20px; }

        /* ì°œí•œ ëª©ë¡ ê·¸ë¦¬ë“œ */
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .course-item {
            border: 1px solid var(--divider); border-radius: var(--border-radius);
            padding: 15px; text-align: center; position: relative;
        }
        .heart { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); }

        /* ê²°ì œ ë‚´ì—­ */
        .payment-item { padding: 15px 0; border-bottom: 1px solid var(--divider); }
        .payment-price { font-weight: bold; color: var(--primary-dark); margin-top: 5px; }
    </style>
</head>
<body>

<header th:replace="~{fragments/header :: header}"></header>

<div class="container">
    <div class="content-wrapper">
        <aside class="profile-card">
            <img th:src="@{'/studentImage/' + profile.imageUrl}" class="profile-img-circle" alt="í”„ë¡œí•„">
            <div class="profile-info">
                <h2 th:text="${profile.user.name}">ê¹€í•™ìƒ</h2>
                <p th:text="${profile.user.email}">student@email.com</p>
                <p th:text="${profile.regionCode}">ëŒ€í•œë¯¼êµ­ ì–´ë”˜ê°€</p>
            </div>
            <div class="side-btns">
                <button class="btn-side" th:onclick="|location.href='@{/profile/student/update(id=${profile.user.id})}'|">í”„ë¡œí•„ í¸ì§‘</button>
<!--                <button class="btn-side">ì„ ìƒë‹˜ìœ¼ë¡œ ì „í™˜</button>-->
                <button class="btn-side" onclick="location.href='/api/logout'">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </aside>

        <main>
            <div style="margin-bottom: 25px;">
                <p th:text="ë°˜ê°€ì›Œìš”, ${profile.user.name}ë‹˜!"></p>
                <h1 style="font-size: 1.4rem;">"ì˜¤ëŠ˜ë„ í˜ì°¨ê²Œ ê³µë¶€í•´ë³¼ê¹Œìš”?"</h1>
            </div>

            <section class="section-card">
                <h3>ğŸ“… ë‹¤ê°€ì˜¤ëŠ” ìˆ˜ì—…</h3>
                <div style="margin-top: 10px; color: var(--text-secondary);" th:each="b: ${before}">
                    <p th:text="${b.lesson.title}">ìˆ˜ì—… ì œëª©</p>
                    <p th:text="${b.lesson.user.name}">XXX ì„ ìƒë‹˜</p>
                </div>
            </section>

            <section class="section-card">
                <div class="tab-menu">
                    <span class="active">ìˆ˜ê°• ë‚´ì—­</span>
                </div>
                <div class="list-row" th:each="a: ${after}">
                    <span th:text="${a.lesson.title}">ìˆ˜ì—… ì œëª©</span>
<!--                    <span class="status-badge">ìˆ˜ê°•ì™„ë£Œ</span>-->
                    <button class="btn-side" th:onclick="|location.href='@{/review(userId=${profile.user.id},lessonId=${book.lesson.id})}'|" style="padding: 2px 10px;">ë¦¬ë·° ìˆ˜ì •</button>
                </div>
<!--                <div class="list-row">-->
<!--                    <span>20XX.XX.XX - ì„¸ìƒê³¼ ì†Œí†µí•˜ëŠ” ì¦ê±°ì›€, ìì‹ ê° ì˜ì–´</span>-->
<!--                    <span class="status-badge">ìˆ˜ê°•ì™„ë£Œ</span>-->
<!--                    <button class="btn-side" style="padding: 2px 10px;">ë¦¬ë·° ì‘ì„±</button>-->
<!--                </div>-->
            </section>

<!--            <div class="grid-3">-->
<!--                <div class="course-item" th:each="i : ${#numbers.sequence(1,3)}">-->
<!--                    <span class="heart">â¤ï¸</span>-->
<!--                    <p style="font-size: 0.8rem; margin-top: 15px;">ì˜ì–´</p>-->
<!--                    <p><strong>ì…ì´ íŠ¸ì´ëŠ” ì˜ì–´</strong></p>-->
<!--                    <p style="font-size: 0.8rem;">XXX ì„ ìƒë‹˜</p>-->
<!--                    <p class="payment-price">30,000ì› / ì‹œê°„</p>-->
<!--                    <button class="btn-side" style="width: 100%; margin-top: 10px;">ìˆ˜ê°• ì‹ ì²­</button>-->
<!--                </div>-->
<!--            </div>-->

            <section class="section-card" style="margin-top: 20px;">
                <h3>ìµœê·¼ ê²°ì œ ë‚´ì—­</h3>
                <div class="payment-item" th:each="pay: ${payments}">
                    <p th:text="${pay.createdAt}">20XX. XXX. XX (ì›”)</p>
                    <p th:text="${pay.booking.lesson.title}"><strong>ì›ë¦¬ë¥¼ ê¿°ëš«ì–´ ë‹µì„ ì°¾ëŠ”, í†µì°° ìˆ˜í•™ - XXX ì„ ìƒë‹˜</strong></p>
                    <p th:text="${pay.amount}ì›" class="payment-price">60,000ì›</p>
                </div>
<!--                <div class="payment-item">-->
<!--                    <p>20XX. XXX. XX (ìˆ˜)</p>-->
<!--                    <p><strong>ì„¸ìƒê³¼ ì†Œí†µí•˜ëŠ” ì¦ê±°ì›€, ìì‹ ê° ì˜ì–´ - XXX ì„ ìƒë‹˜</strong></p>-->
<!--                    <p class="payment-price">50,000ì› (2ì‹œê°„)</p>-->
<!--                </div>-->
            </section>
        </main>
    </div>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
</div>

</body>
</html>