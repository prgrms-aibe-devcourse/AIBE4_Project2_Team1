<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Chat UI</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --main-blue: #2196F3;
            --light-blue: #E3F2FD;
            --border-color: #E0E0E0;
            --text-gray: #9E9E9E;
            --bg-gray: #F5F7F9;
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-gray);
            display: flex; align-items: center; justify-content: center;
        }

        /* 전체 컨테이너 (시안 느낌) */
        .chat-container {
            display: flex; flex-direction: column;
            width: 90vw; max-width: 1100px; height: 85vh;
            background: #fff; border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden; border: 1px solid var(--border-color);
        }

        /* 상단 헤더 */
        .chat-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px; height: 55px; border-bottom: 1px solid var(--border-color);
        }
        .header-left { display: flex; align-items: center; gap: 12px; font-weight: 700; font-size: 1.1rem; }
        .header-right { color: #333; font-size: 1.2rem; cursor: pointer; }

        .chat-main { display: flex; flex: 1; overflow: hidden; }

        /* 왼쪽 사이드바 */
        .chat-sidebar {
            width: 300px; border-right: 1px solid var(--border-color);
            display: flex; flex-direction: column; background: #fff;
        }
        .sidebar-search { padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .sidebar-search input {
            padding: 12px; border: 1px solid var(--border-color);
            border-radius: 6px; outline: none; background: #FAFAFA;
        }
        #btnCreateRoom {
            background-color: var(--main-blue); color: white; border: none;
            padding: 12px; border-radius: 6px; cursor: pointer; font-weight: 600;
        }
        .room-info { padding: 0 20px 10px; font-size: 0.8rem; color: var(--main-blue); }

        .room-list { flex: 1; overflow-y: auto; list-style: none; margin: 0; padding: 0; }
        .room-item {
            display: flex; align-items: center; padding: 15px 20px;
            cursor: pointer; border-bottom: 1px solid #F5F5F5;
        }
        .room-item.active { background-color: #F0F7FF; border-left: 4px solid var(--main-blue); }
        .profile-circle {
            width: 45px; height: 45px; background-color: #E0E0E0;
            border-radius: 50%; margin-right: 15px; flex-shrink: 0;
        }
        .room-text .name { font-weight: 700; font-size: 0.95rem; color: #333; display: block; }
        .room-text .desc { font-size: 0.85rem; color: var(--text-gray); margin-top: 4px; }

        /* 오른쪽 대화창 */
        .chat-content { flex: 1; display: flex; flex-direction: column; position: relative; background: #fff; }
        #messages {
            flex: 1; padding: 25px; overflow-y: auto;
            display: flex; flex-direction: column; gap: 15px; list-style: none; margin: 0;
        }

        /* 시안 중앙 X박스 아이콘 구현 */
        .empty-state {
            position: absolute; top: 45%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center; color: #D1D1D1;
        }
        .empty-state i { font-size: 6rem; margin-bottom: 15px; display: block; }
        .empty-state p { font-size: 1rem; color: #BDBDBD; }

        /* 하단 메시지 입력창 */
        .input-area {
            padding: 20px; border-top: 1px solid var(--border-color);
            display: flex; gap: 12px; align-items: center;
        }
        #messageInput {
            flex: 1; padding: 14px 20px; border: 1px solid #F0F0F0;
            border-radius: 30px; outline: none; background: #F8F9FA;
        }
        #btnSend {
            background-color: var(--main-blue); color: white; border: none;
            padding: 12px 28px; border-radius: 30px; cursor: pointer; font-weight: 700;
            box-shadow: 0 4px 10px rgba(33, 150, 243, 0.3);
        }
    </style>
</head>
<body>

<div class="chat-container">
    <header class="chat-header">
        <div class="header-left">
            <i class="fa-solid fa-bars"></i> <span>로고</span>
        </div>
        <div class="header-right">
            <i class="fa-regular fa-bell"></i> </div>
    </header>

    <div class="chat-main">
        <aside class="chat-sidebar">
            <div class="sidebar-search">
                <input id="otherUsername" placeholder="상대방 username 입력" />
                <button id="btnCreateRoom">방 생성/조회</button>
            </div>
            <p class="room-info">roomId: <strong id="roomId">-</strong></p>

            <ul class="room-list">
                <li class="room-item active">
                    <div class="profile-circle"></div>
                    <div class="room-text">
                        <span class="name">사용자 1</span>
                        <span class="desc">최근 메시지 내용...</span>
                    </div>
                </li>
            </ul>
        </aside>

        <main class="chat-content">
            <ul id="messages">
                <div class="empty-state">
                    <i class="fa-solid fa-square-xmark"></i> <p>대화를 시작하려면 메시지를 입력하세요</p>
                </div>
            </ul>

            <div class="input-area">
                <input id="messageInput" placeholder="메시지를 입력하세요" />
                <button id="btnSend">전송</button>
            </div>
        </main>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script th:src="@{/js/chat-room.js}"></script>

</body>
</html>